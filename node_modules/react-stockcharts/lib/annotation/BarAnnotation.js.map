{"version":3,"sources":["../../../../src/lib/annotation/BarAnnotation.js"],"names":["React","Component","PropTypes","functor","BarAnnotation","props","handleClick","bind","e","onClick","xScale","yScale","datum","className","stroke","opacity","xAccessor","path","text","textXOffset","textYOffset","textAnchor","fontFamily","fontSize","textFill","textOpacity","textRotate","helper","x","y","fill","tooltip","textIcon","textIconFontSize","textIconFill","textIconOpacity","textIconRotate","textIconXOffset","textIconYOffset","plotData","xFunc","yFunc","xPos","yPos","getArrowForTextIcon","type","arrows","simpleUp","simpleDown","fatUp","fatDown","lightUp","lightDown","dashedUp","dashedDown","dashedRight","fatRight","right","propTypes","string","func","object","number","textIconAnchor","defaultProps"],"mappings":"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","file":"BarAnnotation.js","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { functor } from \"../utils\";\n\nclass BarAnnotation extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.handleClick = this.handleClick.bind(this);\n\t}\n\thandleClick(e) {\n\t\tconst { onClick } = this.props;\n\n\t\tif (onClick) {\n\t\t\tconst { xScale, yScale, datum } = this.props;\n\t\t\tonClick({ xScale, yScale, datum }, e);\n\t\t}\n\t}\n\trender() {\n\t\tconst { className, stroke, opacity } = this.props;\n\t\tconst { xAccessor, xScale, yScale, path } = this.props;\n\t\tconst {\n\t\t\ttext,\n\t\t\ttextXOffset,\n\t\t\ttextYOffset,\n\t\t\ttextAnchor,\n\t\t\tfontFamily,\n\t\t\tfontSize,\n\t\t\ttextFill,\n\t\t\ttextOpacity,\n\t\t\ttextRotate\n\t\t} = this.props;\n\t\tconst { x, y, fill, tooltip } = helper(\n\t\t\tthis.props,\n\t\t\txAccessor,\n\t\t\txScale,\n\t\t\tyScale\n\t\t);\n\t\tconst {\n\t\t\ttextIcon,\n\t\t\ttextIconFontSize,\n\t\t\ttextIconFill,\n\t\t\ttextIconOpacity,\n\t\t\ttextIconRotate,\n\t\t\ttextIconXOffset,\n\t\t\ttextIconYOffset\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<g className={className} onClick={this.handleClick}>\n\t\t\t\t{tooltip != null ? <title>{tooltip}</title> : null}\n\t\t\t\t{text != null ? (\n\t\t\t\t\t<text\n\t\t\t\t\t\tx={x}\n\t\t\t\t\t\ty={y}\n\t\t\t\t\t\tdx={textXOffset}\n\t\t\t\t\t\tdy={textYOffset}\n\t\t\t\t\t\tfontFamily={fontFamily}\n\t\t\t\t\t\tfontSize={fontSize}\n\t\t\t\t\t\tfill={textFill}\n\t\t\t\t\t\topacity={textOpacity}\n\t\t\t\t\t\ttransform={\n\t\t\t\t\t\t\ttextRotate != null\n\t\t\t\t\t\t\t\t? `rotate(${textRotate}, ${x}, ${y})`\n\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttextAnchor={textAnchor}\n\t\t\t\t\t>\n\t\t\t\t\t\t{text}\n\t\t\t\t\t</text>\n\t\t\t\t) : null}\n\t\t\t\t{textIcon != null ? (\n\t\t\t\t\t<text\n\t\t\t\t\t\tx={x}\n\t\t\t\t\t\ty={y}\n\t\t\t\t\t\tdx={textIconXOffset}\n\t\t\t\t\t\tdy={textIconYOffset}\n\t\t\t\t\t\tfontSize={textIconFontSize}\n\t\t\t\t\t\tfill={textIconFill}\n\t\t\t\t\t\topacity={textIconOpacity}\n\t\t\t\t\t\ttransform={\n\t\t\t\t\t\t\ttextIconRotate != null\n\t\t\t\t\t\t\t\t? `rotate(${textIconRotate}, ${x}, ${y})`\n\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttextAnchor={textAnchor}\n\t\t\t\t\t>\n\t\t\t\t\t\t{textIcon}\n\t\t\t\t\t</text>\n\t\t\t\t) : null}\n\t\t\t\t{path != null ? (\n\t\t\t\t\t<path\n\t\t\t\t\t\td={path({ x, y })}\n\t\t\t\t\t\tstroke={stroke}\n\t\t\t\t\t\tfill={fill}\n\t\t\t\t\t\topacity={opacity}\n\t\t\t\t\t/>\n\t\t\t\t) : null}\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nfunction helper(props, xAccessor, xScale, yScale) {\n\tconst { x, y, datum, fill, tooltip, plotData } = props;\n\n\tconst xFunc = functor(x);\n\tconst yFunc = functor(y);\n\n\tconst [xPos, yPos] = [\n\t\txFunc({ xScale, xAccessor, datum, plotData }),\n\t\tyFunc({ yScale, datum, plotData })\n\t];\n\n\treturn {\n\t\tx: xPos,\n\t\ty: yPos,\n\t\tfill: functor(fill)(datum),\n\t\ttooltip: functor(tooltip)(datum)\n\t};\n}\n\n/**\n * any unicode can be applied.\n * @param {any} type\n */\n\nexport function getArrowForTextIcon(type) {\n\tconst arrows = {\n\t\tsimpleUp: \"⬆\",\n\t\tsimpleDown: \"⬇\",\n\t\tfatUp: \"▲\",\n\t\tfatDown: \"▼\",\n\t\tlightUp: \"↑\",\n\t\tlightDown: \"↓\",\n\t\tdashedUp: \"⇡\",\n\t\tdashedDown: \"⇣\",\n\t\tdashedRight: \"➟\",\n\t\tfatRight: \"➡\",\n\t\tright: \"➤\"\n\t};\n\treturn arrows[type];\n}\n\nBarAnnotation.propTypes = {\n\tclassName: PropTypes.string,\n\tpath: PropTypes.func,\n\tonClick: PropTypes.func,\n\txAccessor: PropTypes.func,\n\txScale: PropTypes.func,\n\tyScale: PropTypes.func,\n\tdatum: PropTypes.object,\n\tstroke: PropTypes.string,\n\tfill: PropTypes.string,\n\topacity: PropTypes.number,\n\ttext: PropTypes.string,\n\ttextAnchor: PropTypes.string,\n\tfontFamily: PropTypes.string,\n\tfontSize: PropTypes.number,\n\ttextOpacity: PropTypes.number,\n\ttextFill: PropTypes.string,\n\ttextRotate: PropTypes.number,\n\ttextXOffset: PropTypes.number,\n\ttextYOffset: PropTypes.number,\n\ttextIcon: PropTypes.string,\n\ttextIconFontSize: PropTypes.number,\n\ttextIconOpacity: PropTypes.number,\n\ttextIconFill: PropTypes.string,\n\ttextIconRotate: PropTypes.number,\n\ttextIconXOffset: PropTypes.number,\n\ttextIconYOffset: PropTypes.number,\n\ttextIconAnchor: PropTypes.string\n};\n\nBarAnnotation.defaultProps = {\n\tclassName: \"react-stockcharts-bar-annotation\",\n\topacity: 1,\n\tfill: \"#000000\",\n\ttextAnchor: \"middle\",\n\tfontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\n\tfontSize: 10,\n\ttextFill: \"#000000\",\n\ttextOpacity: 1,\n\ttextIconFill: \"#000000\",\n\ttextIconFontSize: 10,\n\tx: ({ xScale, xAccessor, datum }) => xScale(xAccessor(datum))\n};\n\nexport default BarAnnotation;\n"]}