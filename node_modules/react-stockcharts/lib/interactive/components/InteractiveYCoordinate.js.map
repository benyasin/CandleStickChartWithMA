{"version":3,"sources":["../../../../../src/lib/interactive/components/InteractiveYCoordinate.js"],"names":["React","Component","PropTypes","GenericChartComponent","getMouseCanvas","isDefined","noop","hexToRGBA","getStrokeDasharrayCanvas","drawOnCanvas","getYCoordinate","InteractiveYCoordinate","props","renderSVG","bind","isHover","moreProps","onHover","values","helper","x1","x2","y","rect","mouseXY","mouseX","mouseY","x","width","height","Math","abs","ctx","bgFill","bgOpacity","textFill","fontFamily","fontSize","fontStyle","fontWeight","stroke","strokeWidth","strokeOpacity","strokeDasharray","text","textBox","edge","selected","hovering","strokeStyle","beginPath","lineWidth","textBaseline","textAlign","font","padding","left","measureText","right","closeIcon","setLineDash","moveTo","lineTo","fillStyle","fillRect","strokeRect","fillText","newEdge","opacity","yValue","displayFormat","yCoord","Error","interactiveCursorClass","onUnHover","onDragStart","onDrag","onDragComplete","chartConfig","yScale","round","propTypes","string","isRequired","number","oneOfType","object","func","defaultClassName","tolerance","bool","defaultProps"],"mappings":"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","file":"InteractiveYCoordinate.js","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport GenericChartComponent from \"../../GenericChartComponent\";\nimport { getMouseCanvas } from \"../../GenericComponent\";\nimport { isDefined, noop, hexToRGBA, getStrokeDasharrayCanvas } from \"../../utils\";\nimport { drawOnCanvas } from \"../../coordinates/EdgeCoordinateV3\";\nimport { getYCoordinate } from \"../../coordinates/MouseCoordinateY\";\n\nclass InteractiveYCoordinate extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.renderSVG = this.renderSVG.bind(this);\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\n\t\tthis.isHover = this.isHover.bind(this);\n\t}\n\tisHover(moreProps) {\n\t\tconst { onHover } = this.props;\n\n\t\tif (isDefined(onHover)) {\n\t\t\tconst values = helper(this.props, moreProps);\n\t\t\tif (values == null) return false;\n\n\t\t\tconst { x1, x2, y, rect } = values;\n\t\t\tconst { mouseXY: [mouseX, mouseY] } = moreProps;\n\n\t\t\tif (\n\t\t\t\tmouseX >= rect.x\n\t\t\t\t&& mouseX <= rect.x + this.width\n\t\t\t\t&& mouseY >= rect.y\n\t\t\t\t&& mouseY <= rect.y + rect.height\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (\n\t\t\t\tx1 <= mouseX\n\t\t\t\t&& x2 >= mouseX\n\t\t\t\t&& Math.abs(mouseY - y) < 4\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\tdrawOnCanvas(ctx, moreProps) {\n\t\tconst {\n\t\t\tbgFill,\n\t\t\tbgOpacity,\n\n\t\t\ttextFill,\n\t\t\tfontFamily,\n\t\t\tfontSize,\n\n\t\t\tfontStyle,\n\t\t\tfontWeight,\n\t\t\tstroke,\n\t\t\tstrokeWidth,\n\t\t\tstrokeOpacity,\n\t\t\tstrokeDasharray,\n\t\t\ttext,\n\t\t\ttextBox,\n\t\t\tedge,\n\t\t} = this.props;\n\n\t\tconst { selected, hovering } = this.props;\n\n\t\tconst values = helper(this.props, moreProps);\n\t\tif (values == null) return;\n\n\t\tconst { x1, x2, y, rect } = values;\n\n\t\tctx.strokeStyle = hexToRGBA(stroke, strokeOpacity);\n\n\t\tctx.beginPath();\n\t\tif (selected || hovering) {\n\t\t\tctx.lineWidth = strokeWidth + 1;\n\t\t} else {\n\t\t\tctx.lineWidth = strokeWidth;\n\t\t}\n\t\tctx.textBaseline = \"middle\";\n\t\tctx.textAlign = \"start\";\n\t\tctx.font = `${fontStyle} ${fontWeight} ${fontSize}px ${fontFamily}`;\n\n\t\tthis.width = textBox.padding.left\n\t\t\t+ ctx.measureText(text).width\n\t\t\t+ textBox.padding.right\n\t\t\t+ textBox.closeIcon.padding.left\n\t\t\t+ textBox.closeIcon.width\n\t\t\t+ textBox.closeIcon.padding.right;\n\n\t\tctx.setLineDash(getStrokeDasharrayCanvas(strokeDasharray));\n\t\tctx.moveTo(x1, y);\n\t\tctx.lineTo(rect.x, y);\n\n\t\tctx.moveTo(rect.x + this.width, y);\n\t\tctx.lineTo(x2, y);\n\t\tctx.stroke();\n\n\t\tctx.setLineDash([]);\n\n\n\t\tctx.fillStyle = hexToRGBA(bgFill, bgOpacity);\n\n\t\tctx.fillRect(rect.x, rect.y, this.width, rect.height);\n\t\tctx.strokeRect(rect.x, rect.y, this.width, rect.height);\n\n\t\tctx.fillStyle = textFill;\n\n\t\tctx.beginPath();\n\t\tctx.fillText(text, rect.x + 10, y);\n\t\tconst newEdge = {\n\t\t\t...edge,\n\t\t\ttextFill,\n\t\t\tfontFamily,\n\t\t\tfontSize,\n\t\t\topacity: bgOpacity\n\t\t};\n\t\tconst yValue = edge.displayFormat(this.props.yValue);\n\t\tconst yCoord = getYCoordinate(y, yValue, newEdge, moreProps);\n\t\tdrawOnCanvas(ctx, yCoord);\n\t}\n\trenderSVG() {\n\t\tthrow new Error(\"svg not implemented\");\n\t}\n\trender() {\n\t\tconst { interactiveCursorClass } = this.props;\n\t\tconst { onHover, onUnHover } = this.props;\n\t\tconst { onDragStart, onDrag, onDragComplete } = this.props;\n\n\t\treturn (\n\t\t\t<GenericChartComponent\n\t\t\t\tclip={false}\n\t\t\t\txxxyyy\n\t\t\t\tisHover={this.isHover}\n\n\t\t\t\tsvgDraw={this.renderSVG}\n\t\t\t\tcanvasToDraw={getMouseCanvas}\n\t\t\t\tcanvasDraw={this.drawOnCanvas}\n\n\t\t\t\tinteractiveCursorClass={interactiveCursorClass}\n\t\t\t\t/* selected={selected} */\n\t\t\t\tenableDragOnHover\n\n\t\t\t\tonDragStart={onDragStart}\n\t\t\t\tonDrag={onDrag}\n\t\t\t\tonDragComplete={onDragComplete}\n\t\t\t\tonHover={onHover}\n\t\t\t\tonUnHover={onUnHover}\n\n\t\t\t\tdrawOn={[\"mousemove\", \"mouseleave\", \"pan\", \"drag\"]}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nfunction helper(props, moreProps) {\n\tconst { yValue, textBox } = props;\n\n\tconst { chartConfig: { width, yScale, height } } = moreProps;\n\n\tconst y = Math.round(yScale(yValue));\n\n\tif (y >= 0 && y <= height) {\n\t\tconst rect = {\n\t\t\tx: textBox.left,\n\t\t\ty: y - textBox.height / 2,\n\t\t\theight: textBox.height,\n\t\t};\n\t\treturn {\n\t\t\tx1: 0,\n\t\t\tx2: width,\n\t\t\ty,\n\t\t\trect,\n\t\t};\n\t}\n\n}\n\nInteractiveYCoordinate.propTypes = {\n\tbgFill: PropTypes.string.isRequired,\n\tbgOpacity: PropTypes.number.isRequired,\n\n\tstroke: PropTypes.string.isRequired,\n\tstrokeWidth: PropTypes.number.isRequired,\n\tstrokeOpacity: PropTypes.number.isRequired,\n\tstrokeDasharray: PropTypes.string.isRequired,\n\n\ttextFill: PropTypes.string.isRequired,\n\tfontFamily: PropTypes.string.isRequired,\n\tfontSize: PropTypes.number.isRequired,\n\tfontWeight: PropTypes.oneOfType([\n\t\tPropTypes.number,\n\t\tPropTypes.string,\n\t]).isRequired,\n\tfontStyle: PropTypes.string.isRequired,\n\n\ttext: PropTypes.string.isRequired,\n\tedge: PropTypes.object.isRequired,\n\ttextBox: PropTypes.object.isRequired,\n\tyValue: PropTypes.number.isRequired,\n\n\tonDragStart: PropTypes.func.isRequired,\n\tonDrag: PropTypes.func.isRequired,\n\tonDragComplete: PropTypes.func.isRequired,\n\tonHover: PropTypes.func,\n\tonUnHover: PropTypes.func,\n\n\tdefaultClassName: PropTypes.string,\n\tinteractiveCursorClass: PropTypes.string,\n\n\ttolerance: PropTypes.number.isRequired,\n\tselected: PropTypes.bool.isRequired,\n\thovering: PropTypes.bool.isRequired,\n};\n\nInteractiveYCoordinate.defaultProps = {\n\tonDragStart: noop,\n\tonDrag: noop,\n\tonDragComplete: noop,\n\n\tfontWeight: \"normal\", // standard dev\n\n\tstrokeWidth: 1,\n\ttolerance: 4,\n\tselected: false,\n\thovering: false,\n};\n\nexport default InteractiveYCoordinate;"]}