{"version":3,"sources":["../../../../../src/lib/interactive/components/ClickableShape.js"],"names":["React","Component","PropTypes","GenericChartComponent","getMouseCanvas","isHovering2","hexToRGBA","ClickableShape","props","saveNode","bind","drawOnCanvas","isHover","node","moreProps","mouseXY","closeIcon","textBox","x","y","halfWidth","width","start1","end1","start2","end2","ctx","stroke","strokeWidth","strokeOpacity","hovering","helper","beginPath","lineWidth","strokeStyle","moveTo","lineTo","Error","interactiveCursorClass","show","onHover","onUnHover","onClick","renderSVG","yValue","text","fontFamily","fontStyle","fontWeight","fontSize","font","yScale","chartConfig","left","padding","measureText","right","propTypes","string","isRequired","number","object","bool","func","defaultProps","fillOpacity"],"mappings":"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","file":"ClickableShape.js","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport GenericChartComponent from \"../../GenericChartComponent\";\nimport { getMouseCanvas } from \"../../GenericComponent\";\n\nimport { isHovering2 } from \"./StraightLine\";\nimport { hexToRGBA } from \"../../utils\";\n\nclass ClickableShape extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.saveNode = this.saveNode.bind(this);\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\n\t\tthis.isHover = this.isHover.bind(this);\n\t}\n\tsaveNode(node) {\n\t\tthis.node = node;\n\t}\n\tisHover(moreProps) {\n\t\tconst { mouseXY } = moreProps;\n\t\tif (this.closeIcon) {\n\t\t\tconst { textBox } = this.props;\n\t\t\tconst { x, y } = this.closeIcon;\n\t\t\tconst halfWidth = textBox.closeIcon.width / 2;\n\n\t\t\tconst start1 = [x - halfWidth, y - halfWidth];\n\t\t\tconst end1 = [x + halfWidth, y + halfWidth];\n\t\t\tconst start2 = [x - halfWidth, y + halfWidth];\n\t\t\tconst end2 = [x + halfWidth, y - halfWidth];\n\n\t\t\tif (isHovering2(start1, end1, mouseXY, 3) || isHovering2(start2, end2, mouseXY, 3)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\tdrawOnCanvas(ctx, moreProps) {\n\t\tconst { stroke, strokeWidth, strokeOpacity, hovering, textBox } = this.props;\n\n\t\tconst [x, y] = helper(this.props, moreProps, ctx);\n\n\t\tthis.closeIcon = { x, y };\n\t\tctx.beginPath();\n\n\t\tctx.lineWidth = hovering ? strokeWidth + 1 : strokeWidth;\n\t\tctx.strokeStyle = hexToRGBA(stroke, strokeOpacity);\n\t\tconst halfWidth = textBox.closeIcon.width / 2;\n\t\tctx.moveTo(x - halfWidth, y - halfWidth);\n\t\tctx.lineTo(x + halfWidth, y + halfWidth);\n\t\tctx.moveTo(x - halfWidth, y + halfWidth);\n\t\tctx.lineTo(x + halfWidth, y - halfWidth);\n\t\tctx.stroke();\n\t}\n\trenderSVG() {\n\t\tthrow new Error(\"svg not implemented\");\n\t}\n\trender() {\n\t\tconst { interactiveCursorClass } = this.props;\n\t\tconst { show } = this.props;\n\t\tconst { onHover, onUnHover, onClick } = this.props;\n\n\t\treturn show\n\t\t\t? <GenericChartComponent ref={this.saveNode}\n\t\t\t\tinteractiveCursorClass={interactiveCursorClass}\n\t\t\t\tisHover={this.isHover}\n\n\t\t\t\tonClickWhenHover={onClick}\n\n\t\t\t\tsvgDraw={this.renderSVG}\n\n\t\t\t\tcanvasDraw={this.drawOnCanvas}\n\t\t\t\tcanvasToDraw={getMouseCanvas}\n\n\t\t\t\tonHover={onHover}\n\t\t\t\tonUnHover={onUnHover}\n\n\t\t\t\tdrawOn={[\"pan\", \"mousemove\", \"drag\"]}\n\t\t\t/>\n\t\t\t: null;\n\t}\n}\n\nfunction helper(props, moreProps, ctx) {\n\tconst { yValue, text, textBox } = props;\n\tconst { fontFamily, fontStyle, fontWeight, fontSize } = props;\n\tctx.font = `${fontStyle} ${fontWeight} ${fontSize}px ${fontFamily}`;\n\n\tconst { chartConfig: { yScale } } = moreProps;\n\n\tconst x = textBox.left\n\t\t+ textBox.padding.left\n\t\t+ ctx.measureText(text).width\n\t\t+ textBox.padding.right\n\t\t+ textBox.closeIcon.padding.left\n\t\t+ textBox.closeIcon.width / 2;\n\n\tconst y = yScale(yValue);\n\n\treturn [x, y];\n\n}\n\nClickableShape.propTypes = {\n\tstroke: PropTypes.string.isRequired,\n\tstrokeOpacity: PropTypes.number.isRequired,\n\tstrokeWidth: PropTypes.number.isRequired,\n\ttextBox: PropTypes.object.isRequired,\n\thovering: PropTypes.bool,\n\tinteractiveCursorClass: PropTypes.string,\n\tshow: PropTypes.bool,\n\tonHover: PropTypes.func,\n\tonUnHover: PropTypes.func,\n\tonClick: PropTypes.func,\n};\n\n\nClickableShape.defaultProps = {\n\tshow: false,\n\tfillOpacity: 1,\n\tstrokeOpacity: 1,\n\tstrokeWidth: 1,\n};\n\nexport default ClickableShape;\n"]}