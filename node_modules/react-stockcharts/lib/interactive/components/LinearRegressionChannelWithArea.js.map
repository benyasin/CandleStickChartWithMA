{"version":3,"sources":["../../../../../src/lib/interactive/components/LinearRegressionChannelWithArea.js"],"names":["React","Component","PropTypes","sum","deviation","path","d3Path","GenericChartComponent","getMouseCanvas","isHovering2","isDefined","getClosestItemIndexes","noop","zipper","hexToRGBA","LinearRegressionChannelWithArea","props","renderSVG","bind","drawOnCanvas","isHover","moreProps","tolerance","onHover","mouseXY","helper","x1","y1","x2","y2","dy","yDiffs","hovering","reduce","result","diff","ctx","stroke","strokeWidth","fillOpacity","strokeOpacity","fill","lineWidth","strokeStyle","fillStyle","beginPath","moveTo","lineTo","closePath","line","toString","selected","interactiveCursorClass","onUnHover","edge1Provider","edge2Provider","x1Value","x2Value","type","xScale","yScale","chartConfig","fullData","xAccessor","left","right","startIndex","Math","min","endIndex","max","array","slice","xs","map","d","valueOf","ys","close","n","length","combine","x","y","xys","xSquareds","pow","b","a","newy1","newy2","stdDev","propTypes","any","isRequired","oneOf","string","number","onDragStart","func","onDrag","onDragComplete","defaultClassName","bool","defaultProps"],"mappings":"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","file":"LinearRegressionChannelWithArea.js","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { sum, deviation } from \"d3-array\";\nimport { path as d3Path } from \"d3-path\";\n\nimport GenericChartComponent from \"../../GenericChartComponent\";\nimport { getMouseCanvas } from \"../../GenericComponent\";\nimport { isHovering2 } from \"./StraightLine\";\n\nimport { isDefined, getClosestItemIndexes, noop, zipper, hexToRGBA } from \"../../utils\";\n\nclass LinearRegressionChannelWithArea extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.renderSVG = this.renderSVG.bind(this);\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\n\t\tthis.isHover = this.isHover.bind(this);\n\t}\n\tisHover(moreProps) {\n\t\tconst { tolerance, onHover } = this.props;\n\n\t\tif (isDefined(onHover)) {\n\t\t\tconst { mouseXY } = moreProps;\n\n\t\t\tconst { x1, y1, x2, y2, dy } = helper(this.props, moreProps);\n\t\t\tconst yDiffs = [-dy, 0, dy];\n\n\t\t\tconst hovering = yDiffs.reduce((result, diff) => result || isHovering2(\n\t\t\t\t[x1, y1 + diff], [x2, y2 + diff], mouseXY, tolerance\n\t\t\t), false);\n\t\t\treturn hovering;\n\t\t}\n\t\treturn false;\n\t}\n\tdrawOnCanvas(ctx, moreProps) {\n\t\tconst { stroke, strokeWidth, fillOpacity, strokeOpacity, fill } = this.props;\n\t\tconst { x1, y1, x2, y2, dy } = helper(this.props, moreProps);\n\n\t\tctx.lineWidth = strokeWidth;\n\t\tctx.strokeStyle = hexToRGBA(stroke, strokeOpacity);\n\t\tctx.fillStyle = hexToRGBA(fill, fillOpacity);\n\n\t\tctx.beginPath();\n\t\tctx.moveTo(x1, y1 - dy);\n\t\tctx.lineTo(x2, y2 - dy);\n\t\tctx.stroke();\n\n\t\tctx.beginPath();\n\t\tctx.moveTo(x2, y2 + dy);\n\t\tctx.lineTo(x1, y1 + dy);\n\t\tctx.stroke();\n\n\t\tctx.beginPath();\n\t\tctx.moveTo(x1, y1 - dy);\n\t\tctx.lineTo(x2, y2 - dy);\n\t\tctx.lineTo(x2, y2 + dy);\n\t\tctx.lineTo(x1, y1 + dy);\n\t\tctx.closePath();\n\t\tctx.fill();\n\n\t\tctx.beginPath();\n\t\tctx.moveTo(x2, y2);\n\t\tctx.lineTo(x1, y1);\n\t\tctx.stroke();\n\t}\n\trenderSVG(moreProps) {\n\t\tconst { stroke, strokeWidth, fillOpacity, strokeOpacity, fill } = this.props;\n\t\tconst { x1, y1, x2, y2, dy } = helper(this.props, moreProps);\n\t\tconst line = {\n\t\t\tstrokeWidth,\n\t\t\tstroke,\n\t\t\tstrokeOpacity,\n\t\t};\n\t\tconst ctx = d3Path();\n\t\tctx.moveTo(x1, y1 - dy);\n\t\tctx.lineTo(x2, y2 - dy);\n\t\tctx.lineTo(x2, y2 + dy);\n\t\tctx.lineTo(x1, y1 + dy);\n\t\tctx.closePath();\n\t\treturn (\n\t\t\t<g>\n\t\t\t\t<line\n\t\t\t\t\t{...line}\n\t\t\t\t\tx1={x1}\n\t\t\t\t\ty1={y1 - dy}\n\t\t\t\t\tx2={x2}\n\t\t\t\t\ty2={y2 - dy}\n\t\t\t\t/>\n\t\t\t\t<line\n\t\t\t\t\t{...line}\n\t\t\t\t\tx1={x1}\n\t\t\t\t\ty1={y1 + dy}\n\t\t\t\t\tx2={x2}\n\t\t\t\t\ty2={y2 + dy}\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\td={ctx.toString()}\n\t\t\t\t\tfill={fill}\n\t\t\t\t\tfillOpacity={fillOpacity}\n\t\t\t\t/>\n\t\t\t\t<line\n\t\t\t\t\t{...line}\n\t\t\t\t\tx1={x1}\n\t\t\t\t\ty1={y1}\n\t\t\t\t\tx2={x2}\n\t\t\t\t\ty2={y2}\n\t\t\t\t/>\n\t\t\t</g>\n\t\t);\n\t}\n\trender() {\n\t\tconst { selected, interactiveCursorClass } = this.props;\n\t\tconst { onHover, onUnHover } = this.props;\n\n\t\treturn <GenericChartComponent\n\t\t\tisHover={this.isHover}\n\n\t\t\tsvgDraw={this.renderSVG}\n\t\t\tcanvasToDraw={getMouseCanvas}\n\t\t\tcanvasDraw={this.drawOnCanvas}\n\n\t\t\tinteractiveCursorClass={interactiveCursorClass}\n\t\t\tselected={selected}\n\n\t\t\tonHover={onHover}\n\t\t\tonUnHover={onUnHover}\n\n\t\t\tdrawOn={[\"mousemove\", \"mouseleave\", \"pan\", \"drag\"]}\n\t\t/>;\n\t}\n}\n\nexport function edge1Provider(props) {\n\treturn function(moreProps) {\n\t\tconst { x1, y1 } = helper(props, moreProps);\n\t\treturn [x1, y1];\n\t};\n}\n\nexport function edge2Provider(props) {\n\treturn function(moreProps) {\n\t\tconst { x2, y2 } = helper(props, moreProps);\n\t\treturn [x2, y2];\n\t};\n}\n\n\nfunction helper(props, moreProps) {\n\tconst { x1Value, x2Value, type } = props;\n\n\tconst { xScale, chartConfig: { yScale }, fullData } = moreProps;\n\tconst { xAccessor } = moreProps;\n\n\t/*\n\thttp://www.metastock.com/Customer/Resources/TAAZ/?p=65\n\ty = a + bx\n\tn = length of array\n\tb = (n * sum(x*y) - sum(xs) * sum(ys)) / (n * sum(xSquareds) - (sum(xs) ^ 2))\n\ta = (sum of closes)\n\t*/\n\n\tconst { left } = getClosestItemIndexes(fullData, x1Value, xAccessor);\n\tconst { right } = getClosestItemIndexes(fullData, x2Value, xAccessor);\n\n\tconst startIndex = Math.min(left, right);\n\tconst endIndex = Math.max(left, right) + 1;\n\n\tconst array = fullData.slice(startIndex, endIndex);\n\n\tconst xs = array.map(d => xAccessor(d).valueOf());\n\tconst ys = array.map(d => d.close);\n\tconst n = array.length;\n\n\tconst combine = zipper()\n\t\t.combine((x, y) => x * y);\n\n\tconst xys = combine(xs, ys);\n\tconst xSquareds = xs.map(x => Math.pow(x, 2));\n\n\tconst b = (n * sum(xys) - sum(xs) * sum(ys)) / (n * sum(xSquareds) - Math.pow(sum(xs), 2));\n\tconst a = (sum(ys) - b * sum(xs)) / n;\n\n\tconst newy1 = a + b * x1Value;\n\tconst newy2 = a + b * x2Value;\n\n\tconst x1 = xScale(x1Value);\n\tconst y1 = yScale(newy1);\n\tconst x2 = xScale(x2Value);\n\tconst y2 = yScale(newy2);\n\n\tconst stdDev = type === \"SD\"\n\t\t? deviation(array, d => d.close)\n\t\t: 0;\n\n\tconst dy = yScale(newy1 - stdDev) - y1;\n\n\treturn {\n\t\tx1, y1, x2, y2, dy\n\t};\n}\n\nLinearRegressionChannelWithArea.propTypes = {\n\tx1Value: PropTypes.any.isRequired,\n\tx2Value: PropTypes.any.isRequired,\n\n\ttype: PropTypes.oneOf([\n\t\t\"SD\", // standard deviation channel\n\t\t\"Raff\", // Raff Regression Channel\n\t]).isRequired,\n\n\tinteractiveCursorClass: PropTypes.string,\n\tstroke: PropTypes.string.isRequired,\n\tstrokeWidth: PropTypes.number.isRequired,\n\tfill: PropTypes.string.isRequired,\n\tfillOpacity: PropTypes.number.isRequired,\n\tstrokeOpacity: PropTypes.number.isRequired,\n\n\tonDragStart: PropTypes.func.isRequired,\n\tonDrag: PropTypes.func.isRequired,\n\tonDragComplete: PropTypes.func.isRequired,\n\n\tonHover: PropTypes.func,\n\tonUnHover: PropTypes.func,\n\n\tdefaultClassName: PropTypes.string,\n\n\ttolerance: PropTypes.number.isRequired,\n\tselected: PropTypes.bool.isRequired,\n};\n\nLinearRegressionChannelWithArea.defaultProps = {\n\tonDragStart: noop,\n\tonDrag: noop,\n\tonDragComplete: noop,\n\n\ttype: \"SD\", // standard dev\n\n\tstrokeWidth: 1,\n\ttolerance: 4,\n\tselected: false,\n};\n\nexport default LinearRegressionChannelWithArea;"]}